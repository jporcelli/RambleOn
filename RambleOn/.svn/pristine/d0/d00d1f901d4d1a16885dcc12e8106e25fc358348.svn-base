package rambleonevents;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import rambleon.RambleOn;
import rambleon.RambleOnDataModel;
import rambleon.RambleOnModeType;
import static rambleon.RambleOnSettings.*;

/**
 * This class handles all events associated with action events fired as a result
 * of mouse clicks in the area bounded by the sprite serving as the capital mode
 * button. If the button is enabled then we process the button press but if the
 * button is disabled then we do nothing
 *
 * @author James Porcelli, SBU ID 108900819
 */
public class CapitalModeButtonHandler implements ActionListener {

    //THE GAME WE ARE MAKING CHANGES FOR
    private RambleOn game;

    /**
     * Constructor for the Capital mode button handler. This method creates a
     * new handler for the capital mode button.
     *
     * @param game The game we are making changes to.
     */
    public CapitalModeButtonHandler(RambleOn game) {
        this.game = game;
    }

    /**
     * This is where we perform any actions necessary as a result of the event
     * generated by a mouse click on the capital mode button. If the button is
     * enabled then we initialize the capitals mode stack to prepare for a game
     * in capital mode, but if it is disabled we ignore it.
     *
     * @param e The event fired by the mouse click on the capital mode button.
     */
    @Override
    public void actionPerformed(ActionEvent e) {
        //MAKE SURE THE BUTTON IS IN AN ENABLED STATE, ELSE DO NOTHIN
        if (game.getGUIButtons().get(CAPITAL_TYPE).getState().equals(ENABLED_STATE)) {
            //INIT THE MAPPINGS OF SUB REGION NAME TO CAPITALS
            ((RambleOnDataModel) game.getData()).getDataManager().initCapitalsMap();
            //AND THEN INIT THE CAPITALS MODE STACK
            ((RambleOnDataModel) game.getData()).initCapitalModeStack();
            //SET THE FLAG INDICATING WE ARE DONE WITH REGION SELECTION AND
            //THEREFORE ARE IN GAME MODE, CAPITAL MODE TO BE EXACT
            ((RambleOnDataModel) game.getData()).setCurMode(RambleOnModeType.CAPITAL_MODE);
        }
    }
}
